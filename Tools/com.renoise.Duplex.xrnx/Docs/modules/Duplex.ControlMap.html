<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>Reference</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>Duplex</h1>

<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Functions">Functions</a></li>
<li><a href="#Fields">Fields</a></li>
</ul>


<h2>Modules</h2>
<ul class="$(kind=='Topics' and '' or 'nowrap'">
  <li><a href="../modules/Duplex.Application.html">Duplex.Application</a></li>
  <li><a href="../modules/Duplex.Applications.Effect.html">Duplex.Applications.Effect</a></li>
  <li><a href="../modules/Duplex.Applications.GridPie.html">Duplex.Applications.GridPie</a></li>
  <li><a href="../modules/Duplex.Applications.Hydra.html">Duplex.Applications.Hydra</a></li>
  <li><a href="../modules/Duplex.Applications.Keyboard.html">Duplex.Applications.Keyboard</a></li>
  <li><a href="../modules/Duplex.Applications.Matrix.html">Duplex.Applications.Matrix</a></li>
  <li><a href="../modules/Duplex.Applications.Metronome.html">Duplex.Applications.Metronome</a></li>
  <li><a href="../modules/Duplex.Applications.MidiActions.Bindings.html">Duplex.Applications.MidiActions.Bindings</a></li>
  <li><a href="../modules/Duplex.Applications.MidiActions.html">Duplex.Applications.MidiActions</a></li>
  <li><a href="../modules/Duplex.Applications.Mixer.html">Duplex.Applications.Mixer</a></li>
  <li><a href="../modules/Duplex.Applications.Mlrx.Mlrx_group.html">Duplex.Applications.Mlrx.Mlrx_group</a></li>
  <li><a href="../modules/Duplex.Applications.Mlrx.Mlrx_note.html">Duplex.Applications.Mlrx.Mlrx_note</a></li>
  <li><a href="../modules/Duplex.Applications.Mlrx.Mlrx_pos.html">Duplex.Applications.Mlrx.Mlrx_pos</a></li>
  <li><a href="../modules/Duplex.Applications.Mlrx.Mlrx_track.html">Duplex.Applications.Mlrx.Mlrx_track</a></li>
  <li><a href="../modules/Duplex.Applications.Mlrx.html">Duplex.Applications.Mlrx</a></li>
  <li><a href="../modules/Duplex.Applications.Navigator.html">Duplex.Applications.Navigator</a></li>
  <li><a href="../modules/Duplex.Applications.NotesOnWheels.html">Duplex.Applications.NotesOnWheels</a></li>
  <li><a href="../modules/Duplex.Applications.PatternCursor.html">Duplex.Applications.PatternCursor</a></li>
  <li><a href="../modules/Duplex.Applications.PatternSequence.html">Duplex.Applications.PatternSequence</a></li>
  <li><a href="../modules/Duplex.Applications.Recorder.html">Duplex.Applications.Recorder</a></li>
  <li><a href="../modules/Duplex.Applications.Repeater.html">Duplex.Applications.Repeater</a></li>
  <li><a href="../modules/Duplex.Applications.Rotate.html">Duplex.Applications.Rotate</a></li>
  <li><a href="../modules/Duplex.Applications.StepSequencer.html">Duplex.Applications.StepSequencer</a></li>
  <li><a href="../modules/Duplex.Applications.SwitchConfiguration.html">Duplex.Applications.SwitchConfiguration</a></li>
  <li><a href="../modules/Duplex.Applications.TestPad.html">Duplex.Applications.TestPad</a></li>
  <li><a href="../modules/Duplex.Applications.TrackSelector.html">Duplex.Applications.TrackSelector</a></li>
  <li><a href="../modules/Duplex.Applications.Transport.html">Duplex.Applications.Transport</a></li>
  <li><a href="../modules/Duplex.Applications.XYPad.html">Duplex.Applications.XYPad</a></li>
  <li><a href="../modules/Duplex.Automation.html">Duplex.Automation</a></li>
  <li><a href="../modules/Duplex.Browser.html">Duplex.Browser</a></li>
  <li><a href="../modules/Duplex.BrowserProcess.html">Duplex.BrowserProcess</a></li>
  <li><a href="../modules/Duplex.Canvas.html">Duplex.Canvas</a></li>
  <li><a href="../modules/Duplex.CanvasPoint.html">Duplex.CanvasPoint</a></li>
  <li><strong>Duplex.ControlMap</strong></li>
  <li><a href="../modules/Duplex.Device.html">Duplex.Device</a></li>
  <li><a href="../modules/Duplex.Display.html">Duplex.Display</a></li>
  <li><a href="../modules/Duplex.Globals.html">Duplex.Globals</a></li>
  <li><a href="../modules/Duplex.Message.html">Duplex.Message</a></li>
  <li><a href="../modules/Duplex.MessageStream.html">Duplex.MessageStream</a></li>
  <li><a href="../modules/Duplex.MidiDevice.html">Duplex.MidiDevice</a></li>
  <li><a href="../modules/Duplex.OscClient.html">Duplex.OscClient</a></li>
  <li><a href="../modules/Duplex.OscDevice.html">Duplex.OscDevice</a></li>
  <li><a href="../modules/Duplex.OscVoiceMgr.html">Duplex.OscVoiceMgr</a></li>
  <li><a href="../modules/Duplex.Preferences.html">Duplex.Preferences</a></li>
  <li><a href="../modules/Duplex.ProcessSlicer.html">Duplex.ProcessSlicer</a></li>
  <li><a href="../modules/Duplex.RoamingDSP.html">Duplex.RoamingDSP</a></li>
  <li><a href="../modules/Duplex.Scheduler.html">Duplex.Scheduler</a></li>
  <li><a href="../modules/Duplex.StateController.html">Duplex.StateController</a></li>
  <li><a href="../modules/Duplex.UIButton.html">Duplex.UIButton</a></li>
  <li><a href="../modules/Duplex.UIButtonStrip.html">Duplex.UIButtonStrip</a></li>
  <li><a href="../modules/Duplex.UIComponent.html">Duplex.UIComponent</a></li>
  <li><a href="../modules/Duplex.UIKey.html">Duplex.UIKey</a></li>
  <li><a href="../modules/Duplex.UIKeyPressure.html">Duplex.UIKeyPressure</a></li>
  <li><a href="../modules/Duplex.UILabel.html">Duplex.UILabel</a></li>
  <li><a href="../modules/Duplex.UIPad.html">Duplex.UIPad</a></li>
  <li><a href="../modules/Duplex.UIPitchBend.html">Duplex.UIPitchBend</a></li>
  <li><a href="../modules/Duplex.UISlider.html">Duplex.UISlider</a></li>
  <li><a href="../modules/Duplex.UISpinner.html">Duplex.UISpinner</a></li>
  <li><a href="../modules/Duplex.WidgetHooks.html">Duplex.WidgetHooks</a></li>
  <li><a href="../modules/Duplex.WidgetKeyboard.html">Duplex.WidgetKeyboard</a></li>
  <li><a href="../modules/Duplex.html">Duplex</a></li>
  <li><a href="../modules/main.html">main</a></li>
</ul>

</div>

<div id="content">

<h1>Module <code>Duplex.ControlMap</code></h1>
<p>Load and parse XML based control-map files, add extra methods, handy accessors.</p>
<p>
<p> </p>

<h3>XML syntax:</h3>

<ul>
    <li>Supported elements are: <code>Row</code>, <code>Column</code>, <code>Group</code>, <code>Param</code> and <code>SubParam</code> </li>
    <li>Use <code>Row</code> and <code>Column</code> nodes for controlling the layout</li>
    <li>Only <code>Param</code> nodes are supported inside a <code>Group</code> node</li>
    <li>Only <code>SubParam</code> nodes are supported inside a <code>Param</code> node</li>
</ul>

<h3>The <code>State</code> node</h3>

<p> Define a state that the control-map can make use of (see also: <a href="../modules/Duplex.StateController.html#">Duplex.StateController</a>)
 Accepts the following attributes</p>

<ul>
    <li><code>name</code> - (string) a unique name for identifying the state, and for prefixing nodes</li>
    <li><a href="http://www.lua.org/manual/5.1/manual.html#pdf-type">type</a>  - (enum) "toggle", "momentary" or "trigger", determine how to respond to events</li>
    <li><code>value</code> - (string) the incoming message that we want to match against, e.g. "C#4|Ch2". </li>
    <li><code>match</code> - (number) the exact value to match (e.g. CC number with value "5") </li>
    <li><code>exclusive</code> - (string) specify a(ny) name for states that should be mutually exclusive</li>
    <li><code>invert</code> - (bool) when true, trigger will light up when state is inactive </li>
    <li><code>receive<em>when</em>inactive</code> - (bool) when/if to receive/send parameter messages </li>
    <li><code>hide<em>when</em>inactive</code> - (bool) when/if to show/hide parameters</li>
    <li><code>disable<em>when</em>inactive</code> - (bool) when/if to enable/disable parameters</li>
    <li><code>active</code> - (bool) set the initial state</li>
</ul>

<h3>The <code>Row</code> and <code>Column</code> node</h3>

<p> State prefixing: supported
 A pure layout node that accepts no attributes </p>

<h3>The <code>Group</code> node</h3>

<p> State prefixing: supported
 Accepts the following attributes </p>

<ul>
    <li><code>name</code> - (string) the group name, this value is passed on to all members (Param nodes)</li>
    <li><code>visible</code> - (bool) optional, define if group should be visible or hidden (default is true)</li>
    <li><code>columns</code> - (int) optional, define how many parameters to create before creating a new row</li>
    <li><code>colorspace</code> - (table) if not defined, inherited from parent or device</li>
    <li><code>orientation</code> (enum) "horizontal" or "vertical" - determines the flow of elements</li>
</ul>

<h3>The <code>Param</code> node</h3>

<p> State prefixing: supported
 Accepts the following attributes</p>

<ul>
    <li><a href="http://www.lua.org/manual/5.1/manual.html#pdf-type">type</a>   - (enum) lowercase version of <a href="../modules/Duplex.Globals.html#INPUT_TYPE">Duplex.Globals.INPUT_TYPE</a>, e.g. <code>dial</code></li>
    <li><code>value</code> - (string) the pattern that we match messages against, e.g. "C#4|Ch2". </li>
    <li><code>action</code> - (string) specify this attribute to use a different output than input pattern</li>
    <li><code>name</code> - (string) give the parameter a descriptive name (optional)</li>
    <li><code>size</code> - (int) the relative size of the UIComponent (2 = 200% size)</li>
    <li><code>aspect</code> - (number) the relative aspect of the UIComponent (0.5 = half height)</li>
    <li><code>minimum</code> - (number) the minimum value (e.g. to set a button to unlit state)</li>
    <li><code>maximum</code> - (number) the maxmum value (e.g. to set a button to lit state)</li>
    <li><code>match</code> - (number) the exact value to match (e.g. CC number with value "5")</li>
    <li><code>match_from</code> - (number) a value range to match (require that you also specify match_to)</li>
    <li><code>match_to</code> - (number) a value range to match (require that you also specify match_from)</li>
    <li><code>skip_echo</code> - (bool) never send message back to device</li>
    <li><code>soft_echo</code> - (bool) only send virtually generated messages back to device</li>
    <li><code>invert</code> - (bool) swap the minimum and maximum values</li>
    <li><code>invert_x</code> - (bool) for XYPad, swap the top and bottom values</li>
    <li><code>invert_y</code> - (bool) for XYPad, swap the left and right values</li>
    <li><code>swap_axes</code> - (bool) for XYPad, swap the horizontal and vertical axes</li>
    <li><code>orientation</code> - (enum) specifies the orientation of a control - relevant for params of type=<code>fader</code></li>
    <li><code>text</code> - (string) specify the text value, relevant for params of type=<code>label</code> </li>
    <li><code>font</code> - (string) specify the font type, relevant for params of type=<code>label</code> </li>
    <li><code>range</code> - (int) specify the range of an on-screen keyboard (number of keys)</li>
    <li><code>mode</code> - (enum) how to interpret incoming values (see <a href="../modules/Duplex.Globals.html#PARAM_MODE">Duplex.Globals.PARAM_MODE</a>)</li>
    <li><code>class</code> - (string) interpret control-map in the context of which (device) class? (default is to use the current device context, but you can enter any literal class name, e.g. "OscDevice" or "LaunchPad")</li>
</ul>

<p>  Some extra properties are added in runtime:</p>

<ul>
    <li><code>id</code> - (string) a unique, auto-generated name</li>
    <li><code>index</code> - (int) the index (position) within the parent <code>Group</code> node</li>
    <li><code>group_name</code> - (string) this value is passed on from the parent <code>Group</code> node</li>
    <li><code>row</code> - (int) the row within the parent <code>Group</code></li>
    <li><code>column</code> - the column within the parent <code>Group</code></li>
    <li><code>has_subparams</code> - (bool) true when the parameter contains additional subparameters</li>
    <li><code>regex_patt</code> - (string) preprocessed regular expression, created when <code>value</code> contains wildcards and/or captures</li>
</ul>

<h3>The <code>SubParam</code> node</h3>

<p>  State prefixing: not supported
  The accepted attributes depend on the type of widget</p>

<ul>
    <li><code>value</code> - (string) the pattern that we match messages against, e.g. "C#4|Ch2" (if not specified, will use parent node)</li>
    <li><code>field</code> - (string) what aspect of the parent parameters' value that is being stored (e.g. "x" for xypad x axis)</li>
</ul>

</p>


<h2><a href="#Functions">Functions</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#__init">__init ()</a></td>
	<td class="summary">Initializate the ControlMap class</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#load_definition">load_definition (file_path, device_context)</a></td>
	<td class="summary">Load_definition: load and parse xml</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#_parse_definition">_parse_definition (control_map_name, xml_string, device_context)</a></td>
	<td class="summary">Parse the supplied xml string (reset the counter first)</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#get_param_by_index">get_param_by_index (index, group_name)</a></td>
	<td class="summary">Retrieve <code>Param</code> node by position within group</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#get_param_by_pos">get_param_by_pos (x, y, group_name)</a></td>
	<td class="summary">Retrieve <code>Param</code> node by x/y coordinates within group</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#get_params">get_params (group_name, index)</a></td>
	<td class="summary">Retrieve <code>Param</code> nodes from group(s), supporting wildcard syntax.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#memoize">memoize ()</a></td>
	<td class="summary">Invoked after having loaded a new controlmap, this function will attempt
 to memoize as much information as possible (update osc/midi buffers etc.)</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#get_midi_params">get_midi_params (str)</a></td>
	<td class="summary">Retrieve parameters with a MIDI style pattern</p>

<p> <code>CC#105|Ch1</code> will match both <code>CC#105|Ch1</code> and <code>CC#105</code>
 (match values on the default channel)</p>

<p> <code>C#*|Ch1</code> will match both <code>C#1|Ch1</code> and <code>C#5</code>
 (support for wildcard syntax)</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#create_typemap">create_typemap (str_message)</a></td>
	<td class="summary">generate a map containing information about each OSC message pattern-part</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#get_osc_params">get_osc_params (osc_str)</a></td>
	<td class="summary">Retrieve parameters with a OSC style pattern.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#import_colorspace">import_colorspace (str)</a></td>
	<td class="summary">Parse a string into a colorspace table</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#count_columns">count_columns (group_name)</a></td>
	<td class="summary">Count number of columns for the provided group</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#count_rows">count_rows (group_name)</a></td>
	<td class="summary">Count number of rows for the provided group</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#get_group_size">get_group_size (group_name)</a></td>
	<td class="summary">Count number of parameters in group</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#get_group_dimensions">get_group_dimensions (group_name)</a></td>
	<td class="summary">Get width/height of provided group</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#is_grid_group">is_grid_group (group_name)</a></td>
	<td class="summary">Test if the group describe a grid group
 (meaning: it contains columns, and each member is a button)</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#is_button">is_button (group_name, index)</a></td>
	<td class="summary">Test if the parameter describes a button</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#_read_file">_read_file (file_path)</a></td>
	<td class="summary">Internal method for reading a file into a string</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#determine_type">determine_type (str)</a></td>
	<td class="summary">Determine the type of message (OSC/Note/CC)</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#_parse_xml">_parse_xml (str, device_context)</a></td>
	<td class="summary">Parse the control-map into a table
 (add meta-info - such as unique ids - while parsing)</td>
	</tr>
</table>
<h2><a href="#Fields">Fields</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#self.groups">self.groups</a></td>
	<td class="summary">(table) associative array - groups by name</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#self.file_path">self.file_path</a></td>
	<td class="summary">(string) location of the control-map file</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#self.patterns">self.patterns</a></td>
	<td class="summary">(table) table of parameter patterns
 (key = pattern, value = list of parameters matching pattern)</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#self.osc_headers">self.osc_headers</a></td>
	<td class="summary">(table) table of OSC headers
 (like patterns, but OSC-only, and with no wildcards allowed)</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#self.osc_buffer">self.osc_buffer</a></td>
	<td class="summary">(table) remember matched OSC patterns
 (key = osc_str, value = output from <a href="../modules/Duplex.ControlMap.html#get_osc_params">get_osc_params</a>)</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#self.midi_buffer">self.midi_buffer</a></td>
	<td class="summary">(table) remember matched MIDI patterns
 (key = midi_str, value = output from <a href="../modules/Duplex.ControlMap.html#get_osc_params">get_osc_params</a>)</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#self.definition">self.definition</a></td>
	<td class="summary">(table) parsed control-map</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#self.typemaps">self.typemaps</a></td>
	<td class="summary">(table) associative array containing various parameter-patterns
 see <a href="../modules/Duplex.ControlMap.html#create_typemap">create_typemap</a></td>
	</tr>
</table>

<br/>
<br/>


    <h2><a name="Functions"></a>Functions</h2>
    <dl class="function">
    <dt>
    <a name = "__init"></a>
    <strong>__init ()</strong>
    </dt>
    <dd>
    Initializate the ControlMap class







</dd>
    <dt>
    <a name = "load_definition"></a>
    <strong>load_definition (file_path, device_context)</strong>
    </dt>
    <dd>
    Load_definition: load and parse xml


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">file_path</span>
         (string), the name of the file, e.g. "my_map.xml"
        </li>
        <li><span class="parameter">device_context</span>
         (<a href="../modules/Duplex.Device.html#">Duplex.Device</a>) used when parsing the xml
        </li>
    </ul>





</dd>
    <dt>
    <a name = "_parse_definition"></a>
    <strong>_parse_definition (control_map_name, xml_string, device_context)</strong>
    </dt>
    <dd>
    Parse the supplied xml string (reset the counter first)


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">control_map_name</span>
         (string) path to XML file
        </li>
        <li><span class="parameter">xml_string</span>
         (string) the XML string
        </li>
        <li><span class="parameter">device_context</span>
         (<a href="../modules/Duplex.Device.html#">Duplex.Device</a>)
        </li>
    </ul>





</dd>
    <dt>
    <a name = "get_param_by_index"></a>
    <strong>get_param_by_index (index, group_name)</strong>
    </dt>
    <dd>
    Retrieve <code>Param</code> node by position within group


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">index</span>
         (int) the index/position
        </li>
        <li><span class="parameter">group_name</span>
         (string) the control-map group name
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        (table or nil) table of attributes
    </ol>




</dd>
    <dt>
    <a name = "get_param_by_pos"></a>
    <strong>get_param_by_pos (x, y, group_name)</strong>
    </dt>
    <dd>
    Retrieve <code>Param</code> node by x/y coordinates within group


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">x</span>
         (int) the horizontal position
        </li>
        <li><span class="parameter">y</span>
         (int) the vertical position
        </li>
        <li><span class="parameter">group_name</span>
         (string) the control-map group name
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        (table or nil) table of attributes
    </ol>




</dd>
    <dt>
    <a name = "get_params"></a>
    <strong>get_params (group_name, index)</strong>
    </dt>
    <dd>

<p>Retrieve <code>Param</code> nodes from group(s), supporting wildcard syntax. </p>

<p> Collect the third parameter from Pad_1:</p>
<pre><code>group_name="Pad_1", index=3
</code></pre>

<p> Collect all parameters from Pad_1</p>
<pre><code>group_name="Pad_1", index=nil
</code></pre>

<p> Collect the third parameter from Pad<em>1,Pad</em>2, etc.</p>
<pre><code>group_name="Pad_*", index=3
</code></pre>

<p> Collect every parameter from Pad<em>1,Pad</em>2, etc.</p>
<pre><code>group_name="Pad_*", index=nil
</code></pre>




    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">group_name</span>
         (String) the control-map group name
        </li>
        <li><span class="parameter">index</span>
         (int) optional index/position
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        (table or nil) the param attributes array
    </ol>




</dd>
    <dt>
    <a name = "memoize"></a>
    <strong>memoize ()</strong>
    </dt>
    <dd>
    Invoked after having loaded a new controlmap, this function will attempt
 to memoize as much information as possible (update osc/midi buffers etc.)







</dd>
    <dt>
    <a name = "get_midi_params"></a>
    <strong>get_midi_params (str)</strong>
    </dt>
    <dd>
    Retrieve parameters with a MIDI style pattern</p>

<p> <code>CC#105|Ch1</code> will match both <code>CC#105|Ch1</code> and <code>CC#105</code>
 (match values on the default channel)</p>

<p> <code>C#*|Ch1</code> will match both <code>C#1|Ch1</code> and <code>C#5</code>
 (support for wildcard syntax)


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">str</span>
         (string, control-map value attribute)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        table containing matched parameters
    </ol>




</dd>
    <dt>
    <a name = "create_typemap"></a>
    <strong>create_typemap (str_message)</strong>
    </dt>
    <dd>
    generate a map containing information about each OSC message pattern-part


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">str_message</span>
        split the message into non-whitespace chunks
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>


<p> (table) </p>

<p>  each part can define the following possible entries:</p>

<pre><code>[int] = {
  text,        -- (string) the raw value
  is_header,   -- (bool) when value is the header part
  wildcard_pos,-- (int) position of first "*" (if any, in header text)
  is_capture,  -- (bool) when token is surrounded by "{}"
  is_token,    -- (bool) when "%f", "%i" or "%s" token
  is_string,   -- (bool) when "%s" token
  is_float,    -- (bool) when "%f" token
  is_integer   -- (bool) when "%i" token
}

has_captures  -- (bool) when any part contains a capture
</code></pre>

<p>  in addition, the map will contain an entry specifying the order
  of each possible item that can be matched with regular expressions:</p>

<pre><code>order = {
  [int] = {             -- position of character
    method = [string]   -- "wildcard" or "capture"
    type = [string]     -- "%f", "%i" or "%s"
  }
}
</code></pre>



    </ol>




</dd>
    <dt>
    <a name = "get_osc_params"></a>
    <strong>get_osc_params (osc_str)</strong>
    </dt>
    <dd>
    Retrieve parameters with a OSC style pattern. </p>

<p> ### Match floats, integers and strings using <code>%f</code>, <code>%i</code> and <code>%s</code></p>

<p> <code>/press 1 %i</code> matches <code>/press 1 1</code> but not <code>/press 1 A</code>      </p>

<p> ### Specify wildcards using an asterisk</p>

<p> <code>/<em>/pre</em> 1 %f</code> matches <code>/12/press 1 1</code> and <code>/a/prefs 1 1.42</code> </p>

<p> ### Specify captures using curved brackets</p>

<p> <code>/tilt {%f} %f {%f}</code> will capture the first and third number </p>

<p> The method will match the action property if it's available, otherwise
 the <code>value</code> property (the <code>action</code> property is needed when a device
 transmit a different outgoing than incoming value)



    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">osc_str</span>
         (string), incoming OSC message
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

         (table) result of match:
  {</p>
<pre><code>(table),  -- Param/SubParam node
(table),  -- resulting values
(table)   -- regular expression match(es)
  {
    index = [int],      -- position of match
    chars = [string],   -- matches characters
    method = [string],  -- "wildcard" or "capture"
    type = [string]     -- "%f", "%s" or "%i"
  }
</code></pre>
<p>  }
    </ol>




</dd>
    <dt>
    <a name = "import_colorspace"></a>
    <strong>import_colorspace (str)</strong>
    </dt>
    <dd>
    Parse a string into a colorspace table


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">str</span>
         (String) a comma-separated string of RGB values, e.g. "4,4,0"
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        table
    </ol>




</dd>
    <dt>
    <a name = "count_columns"></a>
    <strong>count_columns (group_name)</strong>
    </dt>
    <dd>
    Count number of columns for the provided group


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">group_name</span>
         (string) the control-map group name, e.g. <code>Encoders</code>
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        int, or nil if group does not exist
    </ol>




</dd>
    <dt>
    <a name = "count_rows"></a>
    <strong>count_rows (group_name)</strong>
    </dt>
    <dd>
    Count number of rows for the provided group


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">group_name</span>
         (string) the control-map group name, e.g. <code>Encoders</code>
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        int, or nil if group does not exist
    </ol>




</dd>
    <dt>
    <a name = "get_group_size"></a>
    <strong>get_group_size (group_name)</strong>
    </dt>
    <dd>
    Count number of parameters in group


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">group_name</span>
         (string) the control-map group name, e.g. <code>Encoders</code>
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        int, or nil if group does not exist
    </ol>




</dd>
    <dt>
    <a name = "get_group_dimensions"></a>
    <strong>get_group_dimensions (group_name)</strong>
    </dt>
    <dd>
    Get width/height of provided group


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">group_name</span>
         (String) the control-map group name, e.g. <code>Encoders</code>
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>
        width, or nil if not matched</li>
        <li>
        height, or nil if not matched</li>
    </ol>




</dd>
    <dt>
    <a name = "is_grid_group"></a>
    <strong>is_grid_group (group_name)</strong>
    </dt>
    <dd>
    Test if the group describe a grid group
 (meaning: it contains columns, and each member is a button)


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">group_name</span>
         (String) the control-map group name, e.g. <code>Encoders</code>
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        bool
    </ol>




</dd>
    <dt>
    <a name = "is_button"></a>
    <strong>is_button (group_name, index)</strong>
    </dt>
    <dd>
    Test if the parameter describes a button


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">group_name</span>
         (string) the control-map group name, e.g. <code>Encoders</code>
        </li>
        <li><span class="parameter">index</span>
         (int) index within group
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        bool, true if matched, false if not
    </ol>




</dd>
    <dt>
    <a name = "_read_file"></a>
    <strong>_read_file (file_path)</strong>
    </dt>
    <dd>
    Internal method for reading a file into a string


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">file_path</span>



        </li>
    </ul>





</dd>
    <dt>
    <a name = "determine_type"></a>
    <strong>determine_type (str)</strong>
    </dt>
    <dd>
    Determine the type of message (OSC/Note/CC)


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">str</span>
         (string), supply a control-map <code>value</code> such as <code>C#4</code>
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        enum (<a href="../modules/Duplex.Globals.html#DEVICE_MESSAGE">Duplex.Globals.DEVICE_MESSAGE</a>)
    </ol>




</dd>
    <dt>
    <a name = "_parse_xml"></a>
    <strong>_parse_xml (str, device_context)</strong>
    </dt>
    <dd>
    Parse the control-map into a table
 (add meta-info - such as unique ids - while parsing)


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">str</span>
         (String) the xml string
        </li>
        <li><span class="parameter">device_context</span>
         (<a href="../modules/Duplex.Device.html#">Duplex.Device</a>)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        Table
    </ol>




</dd>
</dl>
    <h2><a name="Fields"></a>Fields</h2>
    <dl class="function">
    <dt>
    <a name = "self.groups"></a>
    <strong>self.groups</strong>
    </dt>
    <dd>
    (table) associative array - groups by name







</dd>
    <dt>
    <a name = "self.file_path"></a>
    <strong>self.file_path</strong>
    </dt>
    <dd>
    (string) location of the control-map file







</dd>
    <dt>
    <a name = "self.patterns"></a>
    <strong>self.patterns</strong>
    </dt>
    <dd>
    (table) table of parameter patterns
 (key = pattern, value = list of parameters matching pattern)







</dd>
    <dt>
    <a name = "self.osc_headers"></a>
    <strong>self.osc_headers</strong>
    </dt>
    <dd>
    (table) table of OSC headers
 (like patterns, but OSC-only, and with no wildcards allowed)







</dd>
    <dt>
    <a name = "self.osc_buffer"></a>
    <strong>self.osc_buffer</strong>
    </dt>
    <dd>
    (table) remember matched OSC patterns
 (key = osc_str, value = output from <a href="../modules/Duplex.ControlMap.html#get_osc_params">get_osc_params</a>)







</dd>
    <dt>
    <a name = "self.midi_buffer"></a>
    <strong>self.midi_buffer</strong>
    </dt>
    <dd>
    (table) remember matched MIDI patterns
 (key = midi_str, value = output from <a href="../modules/Duplex.ControlMap.html#get_osc_params">get_osc_params</a>)







</dd>
    <dt>
    <a name = "self.definition"></a>
    <strong>self.definition</strong>
    </dt>
    <dd>
    (table) parsed control-map







</dd>
    <dt>
    <a name = "self.typemaps"></a>
    <strong>self.typemaps</strong>
    </dt>
    <dd>
    (table) associative array containing various parameter-patterns
 see <a href="../modules/Duplex.ControlMap.html#create_typemap">create_typemap</a>







</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.2</a></i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
