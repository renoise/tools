<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>Reference</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>xLib</h1>

<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Functions">Functions</a></li>
<li><a href="#Tables">Tables</a></li>
<li><a href="#Fields">Fields</a></li>
</ul>


<h2>Modules</h2>
<ul class="$(kind=='Topics' and '' or 'nowrap'">
  <li><a href="../modules/classes.xAudioDevice.html">classes.xAudioDevice</a></li>
  <li><a href="../modules/classes.xAutomation.html">classes.xAutomation</a></li>
  <li><a href="../modules/classes.xBlockLoop.html">classes.xBlockLoop</a></li>
  <li><a href="../modules/classes.xColumns.html">classes.xColumns</a></li>
  <li><a href="../modules/classes.xEffectColumn.html">classes.xEffectColumn</a></li>
  <li><a href="../modules/classes.xInstrument.html">classes.xInstrument</a></li>
  <li><a href="../modules/classes.xLib.html">classes.xLib</a></li>
  <li><a href="../modules/classes.xLine.html">classes.xLine</a></li>
  <li><a href="../modules/classes.xLineAutomation.html">classes.xLineAutomation</a></li>
  <li><a href="../modules/classes.xLinePattern.html">classes.xLinePattern</a></li>
  <li><a href="../modules/classes.xMessage.html">classes.xMessage</a></li>
  <li><a href="../modules/classes.xMidiCommand.html">classes.xMidiCommand</a></li>
  <li><strong>classes.xMidiInput</strong></li>
  <li><a href="../modules/classes.xMidiIO.html">classes.xMidiIO</a></li>
  <li><a href="../modules/classes.xMidiMessage.html">classes.xMidiMessage</a></li>
  <li><a href="../modules/classes.xNoteCapture.html">classes.xNoteCapture</a></li>
  <li><a href="../modules/classes.xNoteColumn.html">classes.xNoteColumn</a></li>
  <li><a href="../modules/classes.xNotePos.html">classes.xNotePos</a></li>
  <li><a href="../modules/classes.xOscClient.html">classes.xOscClient</a></li>
  <li><a href="../modules/classes.xOscDevice.html">classes.xOscDevice</a></li>
  <li><a href="../modules/classes.xOscMessage.html">classes.xOscMessage</a></li>
  <li><a href="../modules/classes.xOscPattern.html">classes.xOscPattern</a></li>
  <li><a href="../modules/classes.xOscRouter.html">classes.xOscRouter</a></li>
  <li><a href="../modules/classes.xOscValue.html">classes.xOscValue</a></li>
  <li><a href="../modules/classes.xParameter.html">classes.xParameter</a></li>
  <li><a href="../modules/classes.xPattern.html">classes.xPattern</a></li>
  <li><a href="../modules/classes.xPatternSequencer.html">classes.xPatternSequencer</a></li>
  <li><a href="../modules/classes.xPhrase.html">classes.xPhrase</a></li>
  <li><a href="../modules/classes.xPhraseManager.html">classes.xPhraseManager</a></li>
  <li><a href="../modules/classes.xPlayPos.html">classes.xPlayPos</a></li>
  <li><a href="../modules/classes.xRule.html">classes.xRule</a></li>
  <li><a href="../modules/classes.xRules.html">classes.xRules</a></li>
  <li><a href="../modules/classes.xRuleset.html">classes.xRuleset</a></li>
  <li><a href="../modules/classes.xSample.html">classes.xSample</a></li>
  <li><a href="../modules/classes.xSampleMapping.html">classes.xSampleMapping</a></li>
  <li><a href="../modules/classes.xScale.html">classes.xScale</a></li>
  <li><a href="../modules/classes.xSelection.html">classes.xSelection</a></li>
  <li><a href="../modules/classes.xSongPos.html">classes.xSongPos</a></li>
  <li><a href="../modules/classes.xStreamPos.html">classes.xStreamPos</a></li>
  <li><a href="../modules/classes.xTrack.html">classes.xTrack</a></li>
  <li><a href="../modules/classes.xTransport.html">classes.xTransport</a></li>
  <li><a href="../modules/classes.xValue.html">classes.xValue</a></li>
  <li><a href="../modules/classes.xVoiceManager.html">classes.xVoiceManager</a></li>
  <li><a href="../modules/classes.xVoiceRunner.html">classes.xVoiceRunner</a></li>
  <li><a href="../modules/classes.xVoiceSorter.html">classes.xVoiceSorter</a></li>
</ul>

</div>

<div id="content">

<h1>Module <code>classes.xMidiInput</code></h1>
<p>Asynchroneous interpretation of MIDI messages
.</p>
<p>

<h1></h1>

<h3>Features</h3>
<p>Supports all common MIDI messages (including 14-bit). </p>

<h3>Notes</h3>

<p>About 14-bit multibyte CC messages: when this feature is enabled, the class will wait for the extra messages to arrive, which can delay the processing of "normal" 7-bit messages. So - if you don't need to support multibyte message, you can disable this feature, or exempt certain CC messages from being interpreted as multibyte messages (multibyte_exempted)</p>

<p>About Data Increment and Data Decrement: the value portion of these messages is sometimes given a value or step size, but the transmitted value byte is commonly set to zero. This class will preserve the value, but whether it is used or not depends on the application. </p>

<h3>How to use</h3>

<p>The class is implemented with a callback, which will recieve xMidiMessages</p>

<pre><code>-- define our callback
myCallback = function(xmsg)
  -- do something with the message
end

-- Then, instantiate this class with the callback as argument:
myMidiInput = xMidiInput{
  callback_fn = myCallback
}

-- Now you can feed it with raw midi messages:
myMidiInput:input({0x90,0x45,0x6F})
</code></pre>


<h3>Requires</h3>
<p><a href="../modules/classes.xMidiMessage.html">xMidiMessage</a></p>

</p>


<h2><a href="#Functions">Functions</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#__init">__init (args)</a></td>
	<td class="summary">Constructor</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#input">input (msg, port_name)</a></td>
	<td class="summary">process incoming message - will invoke the callback function when able
 to construct a xMidiMessage from the data that has been received</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#_create_fingerprint">_create_fingerprint (msg_type, midi_msgs)</a></td>
	<td class="summary">Create MIDI 'fingerprint' for the provided message(s)
 (just enough information to identify the CC/NRPN source)</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#add_multibyte_exempt">add_multibyte_exempt (msg_type, msgs)</a></td>
	<td class="summary">convenience method for adding messages to the exempt list</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#on_idle">on_idle ()</a></td>
	<td class="summary">Idle loop : process (or discard) multibyte messages,
  output messages which got delayed due to throttling</td>
	</tr>
</table>
<h2><a href="#Tables">Tables</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#self._multibyte_exempted">self._multibyte_exempted</a></td>
	<td class="summary">(table) messages that should never be interpreted as multibyte</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#self._nrpn_msb_only">self._nrpn_msb_only</a></td>
	<td class="summary">table<fingerprint> NRPN messages that only require the MSB part (7-bit)
 note that 7bit NRPN works without this, but might be a bit sluggish as
 we need to wait for the idle mode to determine that no LSB part arrived</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#self._mb_messages">self._mb_messages</a></td>
	<td class="summary">
<p>table of pending multibyte messages</p>
<pre><code>[fingerprint]{
  type      = [enum] msg_type
  timestamp = [number]
  channel   = [int]
  num       = [int] (only for CC messages)
  lsb       = [int]
  msb       = [int]
  port_name = [string]
}
</code></pre>
</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#self._nrpn_messages">self._nrpn_messages</a></td>
	<td class="summary">
<p>table of pending NRPN messages</p>
<pre><code>{
  timestamp = [number]
  channel   = [int]
  num_msb   = [int]
  num_lsb   = [int]
  data_msb  = {int]
  data_lsb  = [int]
  port_name = [string]
}
</code></pre>
</td>
	</tr>
</table>
<h2><a href="#Fields">Fields</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#self.callback_fn">self.callback_fn</a></td>
	<td class="summary">(function) specify where messages should go</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#self.multibyte_enabled">self.multibyte_enabled</a></td>
	<td class="summary">(bool) decide if multibyte (14-bit) support is enabled</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#self.nrpn_enabled">self.nrpn_enabled</a></td>
	<td class="summary">(bool) decide if NRPN support is enabled</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#self.terminate_nrpns">self.terminate_nrpns</a></td>
	<td class="summary">(bool) true when we expect a Null value from the device
 after receiving or transmitting a NRPN message
 (enabling this feature will transmit Null values too)
 important: only enable this feature if the device is known to transmit
 these messages (midi bytes 2&amp;3: 0x65,0x7F followed by 0x64,0x7F)</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#self.timeout">self.timeout</a></td>
	<td class="summary">number, the amount of time that should pass before we consider a
 multibyte message obsolete (0.1 = tenth of a second)</td>
	</tr>
</table>

<br/>
<br/>


    <h2><a name="Functions"></a>Functions</h2>
    <dl class="function">
    <dt>
    <a name = "__init"></a>
    <strong>__init (args)</strong>
    </dt>
    <dd>
    Constructor


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">args</span>
        , table
  callback<em>fn
  multibyte</em>enabled
  nrpn<em>enabled
  terminate</em>nrpns
  timeout
        </li>
    </ul>





</dd>
    <dt>
    <a name = "input"></a>
    <strong>input (msg, port_name)</strong>
    </dt>
    <dd>
    process incoming message - will invoke the callback function when able
 to construct a xMidiMessage from the data that has been received


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">msg</span>
         (table), raw MIDI message with 3 parts
        </li>
        <li><span class="parameter">port_name</span>
         (string), where message originated from
        </li>
    </ul>





</dd>
    <dt>
    <a name = "_create_fingerprint"></a>
    <strong>_create_fingerprint (msg_type, midi_msgs)</strong>
    </dt>
    <dd>
    Create MIDI 'fingerprint' for the provided message(s)
 (just enough information to identify the CC/NRPN source)


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">msg_type</span>



        </li>
        <li><span class="parameter">midi_msgs</span>



        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        string
    </ol>




</dd>
    <dt>
    <a name = "add_multibyte_exempt"></a>
    <strong>add_multibyte_exempt (msg_type, msgs)</strong>
    </dt>
    <dd>
    convenience method for adding messages to the exempt list


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">msg_type</span>



        </li>
        <li><span class="parameter">msgs</span>



        </li>
    </ul>





</dd>
    <dt>
    <a name = "on_idle"></a>
    <strong>on_idle ()</strong>
    </dt>
    <dd>
    Idle loop : process (or discard) multibyte messages,
  output messages which got delayed due to throttling







</dd>
</dl>
    <h2><a name="Tables"></a>Tables</h2>
    <dl class="function">
    <dt>
    <a name = "self._multibyte_exempted"></a>
    <strong>self._multibyte_exempted</strong>
    </dt>
    <dd>
    (table) messages that should never be interpreted as multibyte







</dd>
    <dt>
    <a name = "self._nrpn_msb_only"></a>
    <strong>self._nrpn_msb_only</strong>
    </dt>
    <dd>
    table<fingerprint> NRPN messages that only require the MSB part (7-bit)
 note that 7bit NRPN works without this, but might be a bit sluggish as
 we need to wait for the idle mode to determine that no LSB part arrived







</dd>
    <dt>
    <a name = "self._mb_messages"></a>
    <strong>self._mb_messages</strong>
    </dt>
    <dd>

<p>table of pending multibyte messages</p>
<pre><code>[fingerprint]{
  type      = [enum] msg_type
  timestamp = [number]
  channel   = [int]
  num       = [int] (only for CC messages)
  lsb       = [int]
  msb       = [int]
  port_name = [string]
}
</code></pre>








</dd>
    <dt>
    <a name = "self._nrpn_messages"></a>
    <strong>self._nrpn_messages</strong>
    </dt>
    <dd>

<p>table of pending NRPN messages</p>
<pre><code>{
  timestamp = [number]
  channel   = [int]
  num_msb   = [int]
  num_lsb   = [int]
  data_msb  = {int]
  data_lsb  = [int]
  port_name = [string]
}
</code></pre>








</dd>
</dl>
    <h2><a name="Fields"></a>Fields</h2>
    <dl class="function">
    <dt>
    <a name = "self.callback_fn"></a>
    <strong>self.callback_fn</strong>
    </dt>
    <dd>
    (function) specify where messages should go







</dd>
    <dt>
    <a name = "self.multibyte_enabled"></a>
    <strong>self.multibyte_enabled</strong>
    </dt>
    <dd>
    (bool) decide if multibyte (14-bit) support is enabled







</dd>
    <dt>
    <a name = "self.nrpn_enabled"></a>
    <strong>self.nrpn_enabled</strong>
    </dt>
    <dd>
    (bool) decide if NRPN support is enabled







</dd>
    <dt>
    <a name = "self.terminate_nrpns"></a>
    <strong>self.terminate_nrpns</strong>
    </dt>
    <dd>
    (bool) true when we expect a Null value from the device
 after receiving or transmitting a NRPN message
 (enabling this feature will transmit Null values too)
 important: only enable this feature if the device is known to transmit
 these messages (midi bytes 2&amp;3: 0x65,0x7F followed by 0x64,0x7F)







</dd>
    <dt>
    <a name = "self.timeout"></a>
    <strong>self.timeout</strong>
    </dt>
    <dd>
    number, the amount of time that should pass before we consider a
 multibyte message obsolete (0.1 = tenth of a second)







</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.2</a></i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
